"0","library(dplyr)"
"0","library(survey)"
"0","party_analysis <- function(measure){"
"0",""
"0","rep <- as.data.frame("
"0","  svyby("
"0","    as.formula("
"0","      paste(""~"" , eval(get(""measure"")))), "
"0","                           ~year, "
"0","                          subset(survey, pid3 == 2), "
"0","                          FUN = svymean, "
"0","                          keep.names = F,"
"0","                          na.rm = T)) %>%"
"0","  mutate(party = ""Republican"")"
"0",""
"0","dem <- as.data.frame("
"0","  svyby("
"0","    as.formula("
"0","      paste(""~"" , eval(get(""measure"")))), "
"0","                           ~year, "
"0","                           subset(survey, pid3 == 1), "
"0","                           FUN = svymean, "
"0","                           keep.names = F,"
"0","                           na.rm = T)) %>%"
"0","  mutate(party = ""Democrat"")"
"0",""
"0",""
"0","party <- rep %>% "
"0","  bind_rows(dem)"
"0",""
"0","return(party)"
"0","}"
