"0","#### LOAD PACKAGES ####"
"0","library(haven)      # loading in DTA data"
"0","library(dplyr)      # data transformation and column mutations"
"0","library(tidyverse)  # drop_na function"
"0","library(dataverse)  # pull data from Dataverse"
"0","library(survey)     # use survey weights"
"0",""
"0",""
"0","##### LOADING DATA ####"
"0",""
"0","ces_participation <- get_dataframe_by_name("
"0","  filename = ""ces_participation_with_2022.csv"","
"0","  original = TRUE,"
"0","  dataset = ""10.7910/DVN/JUX8KA"","
"0","  .f = read_csv,"
"0","  server = ""dataverse.harvard.edu"""
"0",")"
"1","[38;5;254mNew names:
[36mâ€¢[38;5;254m `` -> `...1`[39m
"
"1","[1mRows: [22m[34m426893[39m [1mColumns: [22m[34m13[39m
"
"1","[36mâ”€â”€[39m [1mColumn specification[22m [36mâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€[39m
[1mDelimiter:[22m "",""
[32mdbl[39m (13): ...1, caseid, pid3, pol_meet, put_sign, work_candidate, donate_candidate, weight, year, pol_meet_recode...
"
"1","
[36mâ„¹[39m Use `spec()` to retrieve the full column specification for this data.
[36mâ„¹[39m Specify the column types or set `show_col_types = FALSE` to quiet this message.
"
"0","survey <- svydesign(ids = ~0, data = ces_participation, weights = ~weight)"
"0",""
"0",""
"0","# pol_meet By Party"
"0","pol_meet <- as.data.frame(svyby(~pol_meet_recode, "
"0","                                ~year, "
"0","                                survey, "
"0","                                svymean, "
"0","                                na.rm = TRUE))"
"0",""
"0","pol_meet_rep <- as.data.frame(svyby(~pol_meet_recode, "
"0","                                    ~year, "
"0","                                    subset(survey, pid3 == 2),"
"0","                                    svymean, "
"0","                                    na.rm = T)) %>%"
"0","  mutate(party = ""Republican"")"
"0",""
"0","pol_meet_dem <- as.data.frame(svyby(~pol_meet_recode, "
"0","                                    ~year, "
"0","                                    subset(survey, pid3 == 1), "
"0","                                    svymean, "
"0","                                    na.rm = T)) %>%"
"0","  mutate(party = ""Democrat"")"
"0",""
"0",""
"0","pol_meet_party <- pol_meet_rep %>% "
"0","  bind_rows(pol_meet_dem) "
"0",""
"0","plot_party <- ggplot(pol_meet_party, "
"0","                     aes(x=year, "
"0","                         y=pol_meet_recode, "
"0","                         group = party, "
"0","                         color = party)) + "
"0","  geom_line() +"
"0","  geom_point()+"
"0","  geom_errorbar(aes(ymin=pol_meet_recode-1.96*se, "
"0","                    ymax=pol_meet_recode+1.96*se), "
"0","                width=.2,"
"0","                position=position_dodge(0.05)) +  "
"0","  theme_minimal() +"
"0","  theme(plot.title = element_text(hjust = 0.5), "
"0","        plot.caption = element_text(hjust = 1,"
"0","                                    face = ""italic""),"
"0","        legend.title = element_blank()) + "
"0","  scale_y_continuous(labels = scales::percent_format(accuracy = 1L)) + "
"0","  ylab(""% attended a local political meeting in the past year"") + "
"0","  labs(caption = ""Plot: Pia Deshpande \nData: CES"") +"
"0","  scale_color_manual(values=c(""blue"", ""red"")) +"
"0","  ggtitle("""")"
"0",""
"0",""
"0","# donate_candidate by Party"
"0","donate_candidate <- as.data.frame(svyby(~donate_candidate_recode, "
"0","                                        ~year, "
"0","                                        survey, "
"0","                                        svymean, "
"0","                                        na.rm = TRUE))"
"0",""
"0","donate_candidate_rep <- as.data.frame(svyby(~donate_candidate_recode, "
"0","                                            ~year, "
"0","                                            subset(survey, pid3 == 2), "
"0","                                            svymean, na.rm = T)) %>%"
"0","  mutate(party = ""Republican"")"
"0",""
"0","donate_candidate_dem <- as.data.frame(svyby(~donate_candidate_recode, "
"0","                                            ~year, "
"0","                                            subset(survey, pid3 == 1), "
"0","                                            svymean, "
"0","                                            na.rm = T)) %>%"
"0","  mutate(party = ""Democrat"")"
"0",""
"0",""
"0","donate_candidate_party <- donate_candidate_rep %>% "
"0","  bind_rows(donate_candidate_dem) "
"0",""
"0",""
"0","donate_party <- ggplot(donate_candidate_party, "
"0","                       aes(x=year, y=donate_candidate_recode, "
"0","                           group = party, "
"0","                           color = party)) + "
"0","  geom_line() +"
"0","  geom_point()+"
"0","  geom_errorbar(aes(ymin=donate_candidate_recode-1.96*se, "
"0","                    ymax=donate_candidate_recode+1.96*se), "
"0","                width=.2,"
"0","                position=position_dodge(0.05)) +  "
"0","  theme_minimal() +"
"0","  theme(plot.title = element_text(hjust = 0.5), "
"0","        plot.caption = element_text(hjust = 1,"
"0","                                    face = ""italic""),"
"0","        legend.title = element_blank()) + "
"0","  scale_y_continuous(labels = scales::percent_format(accuracy = 1L)) + "
"0","  ylab(""% donated to a candidate in the past year"") + "
"0","  labs(caption = ""Plot: Pia Deshpande \nData: CES"") +"
"0","  scale_color_manual(values=c(""blue"", ""red"")) +"
"0","  ggtitle("""")"
"0",""
"0",""
"0","# work_candidate by Party"
"0","work_candidate <- as.data.frame(svyby(~work_candidate_recode, "
"0","                                      ~year, "
"0","                                      survey, "
"0","                                      svymean, na.rm = TRUE))"
"0",""
"0","work_candidate_rep <- as.data.frame(svyby(~work_candidate_recode, "
"0","                                          ~year, "
"0","                                          subset(survey, pid3 == 2), "
"0","                                          svymean, na.rm = T)) %>%"
"0","  mutate(party = ""Republican"")"
"0",""
"0","work_candidate_dem <- as.data.frame(svyby(~work_candidate_recode, "
"0","                                          ~year, subset(survey, pid3 == 1), "
"0","                                          svymean, na.rm = T)) %>%"
"0","  mutate(party = ""Democrat"")"
"0",""
"0",""
"0","work_candidate_party <- work_candidate_rep %>% "
"0","  bind_rows(work_candidate_dem) "
"0",""
"0","work_party <- ggplot(work_candidate_party, aes(x=year, "
"0","                                               y=work_candidate_recode, "
"0","                                               group = party, "
"0","                                               color = party)) + "
"0","  geom_line() +"
"0","  geom_point()+"
"0","  geom_errorbar(aes(ymin=work_candidate_recode-1.96*se, "
"0","                    ymax=work_candidate_recode+1.96*se), width=.2,"
"0","                position=position_dodge(0.05)) +  # these colors are not plotting right now"
"0","  theme_minimal() +"
"0","  theme(plot.title = element_text(hjust = 0.5), "
"0","        plot.caption = element_text(hjust = 1,"
"0","                                    face = ""italic""),"
"0","        legend.title = element_blank()) + "
"0","  scale_y_continuous(labels = scales::percent_format(accuracy = 1L))+ "
"0","  ylab(""% worked for a candidate in the past year"") + "
"0","  labs(caption = ""Plot: Pia Deshpande \nData: CES"") +"
"0","  scale_color_manual(values=c(""blue"", ""red"")) +"
"0","  ggtitle("""")"
"0",""
"0","# put_sign by Party"
"0","put_sign <- as.data.frame(svyby(~put_sign_recode, "
"0","                                ~year, "
"0","                                survey, "
"0","                                svymean, na.rm = TRUE))"
"0",""
"0","put_sign_rep <- as.data.frame(svyby(~put_sign_recode, "
"0","                                    ~year, "
"0","                                    subset(survey, pid3 == 2), "
"0","                                    svymean, na.rm = T)) %>%"
"0","  mutate(party = ""Republican"")"
"0",""
"0","put_sign_dem <- as.data.frame(svyby(~put_sign_recode, "
"0","                                    ~year, "
"0","                                    subset(survey, pid3 == 1), "
"0","                                    svymean, na.rm = T)) %>%"
"0","  mutate(party = ""Democrat"")"
"0",""
"0",""
"0","put_sign_party <- put_sign_rep %>% "
"0","  bind_rows(put_sign_dem) "
"0",""
"0","put_sign_party <- ggplot(put_sign_party, "
"0","                         aes(x=year, "
"0","                             y=put_sign_recode, "
"0","                             group = party, "
"0","                             color = party)) + "
"0","  geom_line() +"
"0","  geom_point()+"
"0","  geom_errorbar(aes(ymin=put_sign_recode-1.96*se, "
"0","                    ymax=put_sign_recode+1.96*se), "
"0","                width=.2,"
"0","                position=position_dodge(0.05)) +  "
"0","  theme_minimal() +"
"0","  theme(plot.title = element_text(hjust = 0.5), "
"0","        plot.caption = element_text(hjust = 1,"
"0","                                    face = ""italic""),"
"0","        legend.title = element_blank()) + "
"0","  scale_y_continuous(labels = scales::percent_format(accuracy = 1L)) + "
"0","  ylab(""% put political sign up in the past year"") + "
"0","  labs(caption = ""Plot: Pia Deshpande \nData: CES"") +"
"0","  scale_color_manual(values=c(""blue"", ""red"")) +"
"0","  ggtitle("""")"
